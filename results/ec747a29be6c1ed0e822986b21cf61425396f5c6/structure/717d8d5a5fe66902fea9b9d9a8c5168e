{"pod":[[218,"get"],[229,"post"],[239,"put"],[249,"del"],[294,"upload_file"],[313,"download_file"]],"subroutine":[[3,"BEGIN"],[4,"BEGIN"],[5,"BEGIN"],[6,"BEGIN"],[7,"BEGIN"],[8,"BEGIN"],[9,"BEGIN"],[10,"BEGIN"],[11,"BEGIN"],[12,"BEGIN"],[13,"BEGIN"],[14,"BEGIN"],[16,"BEGIN"],[17,"BEGIN"],[102,"_build_user"],[121,"_build_ftpuser"],[139,"_build_password"],[159,"_build_ftppassword"],[176,"_build_useragent"],[218,"get"],[229,"post"],[239,"put"],[249,"del"],[254,"_request"],[294,"upload_file"],[313,"download_file"],[327,"_create_path"],[383,"_decorate_resource_name"],[388,"_check_cache_dir"],[409,"_from_cache"],[425,"_from_web"],[461,"_error_message"],[476,"_write2cache"],[487,"BEGIN"]],"file":"blib/lib/wtsi_clarity/util/request.pm","branch":[[177,{"text":"unless ($self->config->clarity_api->{'base_uri'})"}],[188,{"text":"if ($host_port =~ /http:/msx)"}],[184,{"text":"unless ($self->ss_request)"}],[257,{"text":"!defined($type) ? :"}],[256,{"text":"unless ($type and $type =~ /GET|POST|PUT|DELETE/msx)"}],[261,{"text":"$ENV{$self->cache_dir_var_name} ? :"}],[267,{"text":"unless ($path)"}],[264,{"text":"if ($cache)"}],[272,{"text":"$cache && !$ENV{$self->save2cache_dir_var_name} ? :"}],[276,{"text":"unless ($response)"}],[280,{"text":"if ($ENV{$self->save2cache_dir_var_name})"}],[295,{"text":"unless my $sftp = 'Net::SFTP::Foreign'->new($server, 'user', $self->ftpuser, 'password', $self->ftppassword)"}],[300,{"text":"unless $sftp->put($oldfilename, \"/$remote_directory/$newfilename\")"}],[315,{"text":"unless my $sftp = 'Net::SFTP::Foreign'->new($server, 'user', $self->ftpuser, 'password', $self->ftppassword)"}],[320,{"text":"unless $sftp->get($remote_path, $local_path)"}],[338,{"text":"if ($url =~ /$base_uri/msx) { }"}],[351,{"text":"if (scalar @components >= 2 and $components[-2] eq 'batch' and $components[-1] eq 'retrieve')"}],[357,{"text":"if ($content)"}],[365,{"text":"if (scalar @components > 2)"}],[374,{"text":"unless ($content)"}],[371,{"text":"if ($path) { }"}],[390,{"text":"unless (-e $cache)"}],[393,{"text":"unless (-d $cache)"}],[397,{"text":"unless (-w $cache)"}],[401,{"text":"unless (-r $cache)"}],[396,{"text":"if ($ENV{$self->save2cache_dir_var_name}) { }"}],[411,{"text":"unless (-e $path)"}],[416,{"text":"unless open my $fh, '<', $path"}],[417,{"text":"unless (defined $fh)"}],[418,{"text":"defined $fh ? :"}],[419,{"text":"unless close $fh"}],[433,{"text":"if ($result)"}],[426,{"text":"if ($path and $ENV{$self->save2cache_dir_var_name} and $ENV{$self->cache_dir_var_name})"}],[444,{"text":"if ($self->additional_headers)"}],[452,{"text":"if ($self->ss_request and not defined $res->decoded_content && ($res->is_success || $res->is_redirect) or not $self->ss_request || $res->is_success)"}],[468,{"text":"unless (eval {\n\tdo {\n\tmy $xml_msg = 'XML::LibXML'->new->load_xml('string', $decoded_content);\n$error_msg = $xml_msg->findnodes($EXCEPTION_MESSAGE_PATH)->pop->textContent;\n1\n}\n})"}],[480,{"text":"unless (-d $dir)"}],[479,{"text":"if (-e $dir) { }"}],[487,{"text":"unless open my $fh, '>:encoding(UTF-8)', $path"}],[488,{"text":"unless $fh"}],[489,{"text":"unless print {$fh;} $content"}],[490,{"text":"unless close $fh"}]],"statement":[3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,16,16,16,17,17,17,102,103,105,121,122,124,139,140,142,159,160,162,176,177,178,180,181,182,183,184,187,188,190,193,195,218,220,229,230,239,240,249,250,254,256,257,258,261,262,264,265,266,267,268,272,276,277,280,281,284,294,295,299,300,303,313,315,320,323,327,328,330,331,332,333,335,336,338,339,341,344,346,347,348,349,351,354,357,358,362,364,364,365,366,367,369,371,372,374,374,375,377,383,384,388,390,391,393,394,396,397,398,401,402,405,409,411,412,415,416,417,417,418,419,421,425,426,427,429,430,433,434,437,438,439,440,441,444,445,445,446,449,452,454,457,461,462,468,465,466,467,469,472,476,478,479,480,481,484,487,488,489,489,490,491,487,487,487],"digest":"717d8d5a5fe66902fea9b9d9a8c5168e","start":{"139":{"_build_password":[{"pod":null,"statement":48,"subroutine":16,"time":null,"branch":null,"condition":2}]},"102":{"_build_user":[{"pod":null,"statement":42,"subroutine":14,"time":null,"branch":null,"condition":null}]},"7":{"BEGIN":[{"pod":null,"statement":12,"subroutine":4,"time":null,"branch":null,"condition":null}]},"17":{"BEGIN":[{"pod":null,"statement":39,"subroutine":13,"time":null,"branch":null,"condition":null}]},"327":{"_create_path":[{"pod":6,"statement":101,"subroutine":26,"time":null,"branch":15,"condition":6}]},"383":{"_decorate_resource_name":[{"pod":6,"statement":134,"subroutine":27,"time":null,"branch":21,"condition":9}]},"16":{"BEGIN":[{"pod":null,"statement":36,"subroutine":12,"time":null,"branch":null,"condition":null}]},"249":{"del":[{"pod":3,"statement":73,"subroutine":22,"time":null,"branch":3,"condition":4}]},"218":{"get":[{"pod":null,"statement":67,"subroutine":19,"time":null,"branch":3,"condition":4}]},"313":{"download_file":[{"pod":5,"statement":97,"subroutine":25,"time":null,"branch":13,"condition":6}]},"14":{"BEGIN":[{"pod":null,"statement":33,"subroutine":11,"time":null,"branch":null,"condition":null}]},"254":{"_request":[{"pod":4,"statement":75,"subroutine":23,"time":null,"branch":3,"condition":4}]},"10":{"BEGIN":[{"pod":null,"statement":21,"subroutine":7,"time":null,"branch":null,"condition":null}]},"11":{"BEGIN":[{"pod":null,"statement":24,"subroutine":8,"time":null,"branch":null,"condition":null}]},"239":{"put":[{"pod":2,"statement":71,"subroutine":21,"time":null,"branch":3,"condition":4}]},"121":{"_build_ftpuser":[{"pod":null,"statement":45,"subroutine":15,"time":null,"branch":null,"condition":1}]},"294":{"upload_file":[{"pod":4,"statement":92,"subroutine":24,"time":null,"branch":11,"condition":6}]},"461":{"_error_message":[{"pod":6,"statement":177,"subroutine":31,"time":null,"branch":35,"condition":15}]},"487":{"BEGIN":[{"pod":6,"statement":197,"subroutine":33,"time":null,"branch":42,"condition":15}]},"13":{"BEGIN":[{"pod":null,"statement":30,"subroutine":10,"time":null,"branch":null,"condition":null}]},"388":{"_check_cache_dir":[{"pod":6,"statement":136,"subroutine":28,"time":null,"branch":21,"condition":9}]},"6":{"BEGIN":[{"pod":null,"statement":9,"subroutine":3,"time":null,"branch":null,"condition":null}]},"159":{"_build_ftppassword":[{"pod":null,"statement":51,"subroutine":17,"time":null,"branch":null,"condition":3}]},"476":{"_write2cache":[{"pod":6,"statement":185,"subroutine":32,"time":null,"branch":36,"condition":15}]},"3":{"BEGIN":[{"pod":null,"statement":null,"subroutine":null,"time":null,"branch":null,"condition":null}]},"9":{"BEGIN":[{"pod":null,"statement":18,"subroutine":6,"time":null,"branch":null,"condition":null}]},"12":{"BEGIN":[{"pod":null,"statement":27,"subroutine":9,"time":null,"branch":null,"condition":null}]},"425":{"_from_web":[{"pod":6,"statement":157,"subroutine":30,"time":null,"branch":31,"condition":9}]},"176":{"_build_useragent":[{"pod":null,"statement":54,"subroutine":18,"time":null,"branch":null,"condition":4}]},"8":{"BEGIN":[{"pod":null,"statement":15,"subroutine":5,"time":null,"branch":null,"condition":null}]},"4":{"BEGIN":[{"pod":null,"statement":3,"subroutine":1,"time":null,"branch":null,"condition":null}]},"229":{"post":[{"pod":1,"statement":69,"subroutine":20,"time":null,"branch":3,"condition":4}]},"409":{"_from_cache":[{"pod":6,"statement":147,"subroutine":29,"time":null,"branch":26,"condition":9}]},"-1":{"__COVER__":[{"pod":6,"statement":197,"subroutine":33,"time":null,"branch":42,"condition":15}]},"5":{"BEGIN":[{"pod":null,"statement":6,"subroutine":2,"time":null,"branch":null,"condition":null}]}},"condition":[[103,{"left":"$self->config->clarity_api->{'username'}","right":"croak('Cannot retrieve username from the configuration file')","type":"or_3","op":"||"}],[122,{"left":"$self->config->ftp_user->{'username'}","right":"croak('Cannot retrieve ftp username from the configuration file')","type":"or_3","op":"||"}],[140,{"left":"$self->config->clarity_api->{'password'}","right":"croak('Cannot retrieve password from the configuration file')","type":"or_3","op":"||"}],[160,{"left":"$self->config->ftp_user->{'password'}","right":"croak('Cannot retrieve ftp password from the configuration file')","type":"or_3","op":"||"}],[256,{"left":"$type","right":"$type =~ /GET|POST|PUT|DELETE/msx","type":"and_3","op":"and"}],[272,{"left":"$cache","right":"!$ENV{$self->save2cache_dir_var_name}","type":"and_3","op":"&&"}],[351,{"left":"scalar @components >= 2","right":"$components[-2] eq 'batch'","type":"and_3","op":"and"}],[351,{"left":"scalar @components >= 2 and $components[-2] eq 'batch'","right":"$components[-1] eq 'retrieve'","type":"and_3","op":"and"}],[372,{"left":"$ENV{$self->cache_dir_var_name}","right":"''","type":"or_2","op":"||"}],[426,{"left":"$path","right":"$ENV{$self->save2cache_dir_var_name}","type":"and_3","op":"and"}],[426,{"left":"$path and $ENV{$self->save2cache_dir_var_name}","right":"$ENV{$self->cache_dir_var_name}","type":"and_3","op":"and"}],[452,{"left":"defined $res->decoded_content","right":"($res->is_success || $res->is_redirect)","type":"and_3","op":"&&"}],[452,{"left":"$self->ss_request","right":"not defined $res->decoded_content && ($res->is_success || $res->is_redirect)","type":"and_3","op":"and"}],[452,{"left":"$self->ss_request","right":"$res->is_success","type":"or_3","op":"||"}],[452,{"left":"$self->ss_request and not defined $res->decoded_content && ($res->is_success || $res->is_redirect)","right":"not $self->ss_request || $res->is_success","type":"or_3","op":"or"}]]}